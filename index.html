<!DOCTYPE html> <!-- HTML5 doctype -->
<html lang="da"> <!-- Sets page language to Danish -->
<head>
    <!-- Basic meta settings, responsive viewport, title, and font/link references -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mit Website</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Aptos:wght@400;700&display=swap" rel="stylesheet">
    <!-- Simple favicon using an inline SVG -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåê</text></svg>">
    <!-- SEO metadata and Open Graph tags -->
    <meta name="description" content="Walsted om AI og uddannelse">
    <meta property="og:title" content="Dit website navn">
    <meta property="og:description" content="AI og uddannelse">
    <meta property="og:type" content="https://mit-f-rste-vercel-projekt.vercel.app/">
    <meta property="og:url" content="https://mit-f-rste-vercel-projekt.vercel.app/">
</head>
<body>
    <header>
        <!-- Main heading with a simple nav menu -->
        <h1 class="animated-title">Velkommen</h1>
        <nav>
            <ul>
                <li><a href="#om">Om mig</a></li>
                <li><a href="#projekter">Projekter</a></li>
                <li><a href="#kontakt">Kontakt</a></li>
            </ul>
        </nav>
    </header>
        <div class="weather-widget"></div>
    <main>
        <!-- "Om mig" section -->
        <section id="om">
            <h2>Om mig</h2>
            <p>Her kommer din beskrivelse</p>
        </section>
        <!-- "Projekter" section with two example project cards -->
        <section id="projekter">
            <h2>Projekter</h2>
            <div class="projekt-grid">
                <article class="projekt-kort">
                    <h3>Projekt 1</h3>
                    <p>Beskrivelse af projektet</p>
                </article>
                <article class="projekt-kort">
                    <h3>Projekt 2</h3>
                    <p>Beskrivelse af projektet</p>
                </article>
            </div>
        </section>
        <!-- "Kontakt" section with a form for user input -->
        <section id="kontakt">
            <h2>Kontakt</h2>
            <form class="kontakt-form">
                <input type="text" name="name" placeholder="Dit navn" required>
                <input type="email" name="email" placeholder="Din email" required>
                <textarea name="message" placeholder="Din besked" required></textarea>
            <button type="submit">Send</button>
            </form>
        </section>
    </main>

    <script>
        // Validation rules stored in an object
        const formValidation = {
            name: {
                pattern: /^[a-zA-Z√¶√∏√•√Ü√ò√Ö\s]{2,50}$/,
                message: 'Navn skal v√¶re mellem 2 og 50 bogstaver'
            },
            email: {
                pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
                message: 'Indtast en gyldig email'
            },
            message: {
                minLength: 10,
                message: 'Beskeden skal v√¶re mindst 10 tegn'
            }
        };

        // Generic input validation function
        function validateInput(input, rules) {
            const value = input.value.trim();
            const errorDiv = input.nextElementSibling || createErrorDiv(input);

            if (rules.pattern && !rules.pattern.test(value)) {
                showError(input, errorDiv, rules.message);
                return false;
            }
            if (rules.minLength && value.length < rules.minLength) {
                showError(input, errorDiv, rules.message);
                return false;
            }
            hideError(input, errorDiv);
            return true;
        }

        // Displays error message
        function showError(input, errorDiv, message) {
            input.classList.add('error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        // Hides error message
        function hideError(input, errorDiv) {
            input.classList.remove('error');
            errorDiv.style.display = 'none';
        }

        // Creates an error message div if it doesn't exist
        function createErrorDiv(input) {
            const div = document.createElement('div');
            div.className = 'error-message';
            input.parentNode.insertBefore(div, input.nextSibling);
            return div;
        }

        // Form submit handler with validation
        document.querySelector('.kontakt-form').addEventListener('submit', function(e) {
            e.preventDefault();
            let isValid = true;

            // Validate name
            const nameInput = this.querySelector('input[type="text"]');
            isValid = validateInput(nameInput, formValidation.name) && isValid;

            // Validate email
            const emailInput = this.querySelector('input[type="email"]');
            isValid = validateInput(emailInput, formValidation.email) && isValid;

            // Validate message
            const messageInput = this.querySelector('textarea');
            isValid = validateInput(messageInput, formValidation.message) && isValid;

            // If all fields are valid, simulate sending
            if (isValid) {
                const button = this.querySelector('button');
                button.disabled = true;
                button.innerHTML = '<span class="loading"></span> Sender...';

                setTimeout(() => {
                    button.disabled = false;
                    button.innerHTML = 'Send';
                    alert('Besked sendt!');
                    this.reset();
                }, 2000);
            }
        });
   // Progress bar
   const progressBar = document.createElement('div');
   progressBar.className = 'progress-bar';
   document.body.appendChild(progressBar);
   
   window.addEventListener('scroll', () => {
       const winScroll = document.documentElement.scrollTop;
       const height = document.documentElement.scrollHeight - window.innerHeight;
       const scrolled = (winScroll / height) * 100;
       progressBar.style.width = scrolled + '%';
   });
   
   document.querySelectorAll('.projekt-kort').forEach(card => {
    const title = card.querySelector('h3').textContent;
    const description = card.querySelector('p').textContent;
    
    card.innerHTML = `
        <div class="skeleton">
            <div class="skeleton-title"></div>
            <div class="skeleton-text"></div>
            <div class="skeleton-text"></div>
        </div>
    `;
    
    setTimeout(() => {
        card.innerHTML = `
            <h3>${title}</h3>
            <p>${description}</p>
        `;
        card.classList.add('loaded');
    }, 1500);
});
// Error handling utilities
function showError(message, element) {
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message';
    errorDiv.textContent = message;
    element.parentNode.insertBefore(errorDiv, element.nextSibling);
    
    setTimeout(() => errorDiv.remove(), 5000);
}

// Form validation with error handling
document.querySelector('.kontakt-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    const button = this.querySelector('button');
    
    try {
        // Validate all fields
        const inputs = this.querySelectorAll('input, textarea');
        let hasError = false;
        
        inputs.forEach(input => {
            if (!input.value.trim()) {
                showError('Dette felt er p√•kr√¶vet', input);
                hasError = true;
            }
        });
        
        if (hasError) return;
        
        // Simulate API call
        button.disabled = true;
        button.innerHTML = '<span class="loading"></span> Sender...';
        
        const response = await simulateAPICall();
        
        if (!response.ok) {
            throw new Error('Netv√¶rksfejl');
        }
        
        button.innerHTML = 'Sendt!';
        this.reset();
        
    } catch (error) {
        showError(error.message || 'Der skete en fejl', this);
    } finally {
        button.disabled = false;
        setTimeout(() => button.innerHTML = 'Send', 2000);
    }
});

// Simulate API call
function simulateAPICall() {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve({ ok: true });
        }, 2000);
    });
}

// Global error handling
window.addEventListener('error', function(e) {
    console.error('JavaScript fejl:', e.message);
    showError('Der skete en uventet fejl', document.body);
});

// Form storage handling
const form = document.querySelector('.kontakt-form');
const formFields = ['name', 'email', 'message'];

// Save form data
form.addEventListener('input', (e) => {
    const field = e.target;
    localStorage.setItem(`form_${field.name}`, field.value);
});

// Load saved data
window.addEventListener('load', () => {
    formFields.forEach(field => {
        const value = localStorage.getItem(`form_${field}`);
        if (value) {
            form.elements[field].value = value;
        }
    });
});

// Clear storage on submit
form.addEventListener('submit', () => {
    formFields.forEach(field => {
        localStorage.removeItem(`form_${field}`);
    });
});

// Weather Widget
async function getWeather() {
    const city = 'Copenhagen';
    const apiKey = '79053c59004c0d0e55c8eba5c92841fa'; // Get from OpenWeather
    
    try {
        const response = await fetch(
            `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${apiKey}`
        );
        
        if (!response.ok) throw new Error('Vejr data ikke tilg√¶ngelig');
        
        const data = await response.json();
        
        document.querySelector('.weather-widget').innerHTML = `
            <div class="weather-info">
                <h4>${city}</h4>
                <p>${Math.round(data.main.temp)}¬∞C</p>
                <p>${data.weather[0].description}</p>
            </div>
        `;
    } catch (error) {
        console.error('Vejr fejl:', error);
    }
}

// Hent vejr data n√•r siden loader
getWeather();

// Opdater hver 30. minut
setInterval(getWeather, 1800000);
</script>
</body>
</html>